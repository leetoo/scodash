@import controllers.routes
@(hash: String, name: String)

@main("Scoring showDashboard") {

    <body data-ws-url="@routes.Application.ws(hash).webSocketURL(request)">
@*        <div class="navbar navbar-inverse navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <a class="brand" href="#">Reactive Stocks</a>
                    <form hash="addsymbolform" class="navbar-form pull-right">
                        <input hash="addsymboltext" type="text" class="span2" placeholder="SYMBOL">
                        <button type="submit" class="btn">Add Stock</button>
                    </form>
                </div>
            </div>
        </div>*@



        <div class="container">

            <h2>@{name}</h2>

            <table id="dashboard" class="table table-striped">
            </table>

            <form class="form-inline" method="post" action="@routes.Application.addItem">
                <div class="form-group">
                    <label class="sr-only" for="dashboardName"></label>
                    <input id="name" name="name" type="text" class="form-control" placeholder="Name of item"/>
                    <input id="hash" name="hash" type="hidden" value="@{hash}"/>
                </div>
                <button id="add" type="submit" class="btn btn-primary">Add</button>
            </form>

        </div>

    </body>

    <script>
        var key = 'recentDashboards';
        var hash = '@{hash}';
        var name = '@{name}';
        var recentHashes = JSON.parse(localStorage.getItem(key)) || [];
        var addDashboard = true;
        for (var i = 0; i < recentHashes.length; i++) {
            var recent = recentHashes[i];
            if (recent.hash == hash) {
                addDashboard = false;
                break;
            }
        }
        if (addDashboard) {
            recentHashes.push({hash:hash,name:name});
            localStorage.setItem(key, JSON.stringify(recentHashes));
        }
    </script>


}
